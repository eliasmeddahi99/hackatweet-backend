var express = require('express');
var router = express.Router();

const Twit = require('../models/twits');
const Hashtag = require('../models/hashtags');

//require("../models/connection")

/* GET users listing. */



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////---- List de touts les tweets comprenant un hashtag /////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

router.get('/', (req, res) => {
  Hashtag.find({}).populate("twits").then(data => {
   if (data) {
     res.json({ result: true, AllTwits : data });
   } else {
     res.json({ result: false, error: 'no tweets with hashtags' });
   }
 });
});


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////---- Chercher les tweets correspondant Ã  un hashtag en particulier //////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



router.get('/:tag', (req, res) => {
  Hashtag.find({name : req.params.tag}).populate("twits").then(data => {
   if (data) {
     res.json({ result: true, twits : data });
   } else {
     res.json({ result: false, error: 'no tweets with hashtags' });
   }
 });
});



module.exports = router;







